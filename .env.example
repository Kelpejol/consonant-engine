# Beam Environment Variables
#
# Copy this file to .env and adjust values for your environment
# 
# cp .env.example .env

# ==============================================================================
# SERVER CONFIGURATION
# ==============================================================================

# gRPC server port
GRPC_PORT=9090

# HTTP server port (REST API + health checks + metrics)
HTTP_PORT=8080

# Environment (development, staging, production)
ENVIRONMENT=development

# Log level (debug, info, warn, error)
LOG_LEVEL=debug

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# PostgreSQL connection URL
# Format: postgres://user:password@host:port/database?sslmode=disable
POSTGRES_URL=postgres://postgres:postgres@localhost:5432/beam?sslmode=disable

# Redis connection address
REDIS_ADDR=localhost:6379

# Redis password (leave empty for no password)
REDIS_PASSWORD=

# ==============================================================================
# APPLICATION CONFIGURATION
# ==============================================================================

# Grains per dollar conversion rate (default: 1,000,000 grains = $1)
GRAINS_PER_DOLLAR=1000000

# Default buffer strategy for new customers (conservative or aggressive)
DEFAULT_BUFFER_STRATEGY=conservative

# Maximum concurrent requests per server
MAX_CONCURRENT_REQUESTS=10000

# Request timeout in seconds
REQUEST_TIMEOUT=30

# ==============================================================================
# MONITORING & OBSERVABILITY
# ==============================================================================

# Enable Prometheus metrics endpoint
ENABLE_METRICS=true

# Enable pprof profiling endpoint (development only)
ENABLE_PROFILING=false

# Metrics endpoint path
METRICS_PATH=/metrics

# ==============================================================================
# SECURITY
# ==============================================================================

# Enable TLS for gRPC (production only)
ENABLE_TLS=false

# TLS certificate file path
TLS_CERT_FILE=/path/to/cert.pem

# TLS key file path
TLS_KEY_FILE=/path/to/key.pem

# API rate limiting (requests per second per customer)
RATE_LIMIT_PER_CUSTOMER=100

# Global rate limit (requests per second)
RATE_LIMIT_GLOBAL=10000

# ==============================================================================
# DEVELOPMENT SETTINGS
# ==============================================================================

# Enable CORS for development (disable in production)
ENABLE_CORS=true

# Enable gRPC reflection for grpcurl (development only)
ENABLE_GRPC_REFLECTION=true

# Test API key for development (DO NOT use in production)
# Key: beam_test_key_1234567890
# Hash: 5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8
TEST_API_KEY=beam_test_key_1234567890

# ==============================================================================
# OPERATIONAL SETTINGS
# ==============================================================================

# Graceful shutdown timeout in seconds
SHUTDOWN_TIMEOUT=30

# Redis sync interval in minutes
REDIS_SYNC_INTERVAL=5

# Request cleanup interval in minutes (for expired requests)
REQUEST_CLEANUP_INTERVAL=60

# PostgreSQL connection pool size
POSTGRES_MAX_CONNECTIONS=50

# Redis connection pool size
REDIS_POOL_SIZE=100

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================

# Enable automatic balance reconciliation
ENABLE_AUTO_RECONCILIATION=true

# Enable request deduplication
ENABLE_REQUEST_DEDUPLICATION=true

# Enable detailed audit logging
ENABLE_AUDIT_LOGGING=true

# ==============================================================================
# ALERTS & NOTIFICATIONS (Future)
# ==============================================================================

# Slack webhook URL for alerts
# SLACK_WEBHOOK_URL=

# Alert on low balance threshold (in grains)
# LOW_BALANCE_THRESHOLD=1000000

# Alert on balance integrity issues
# ALERT_ON_INTEGRITY_ISSUES=true
